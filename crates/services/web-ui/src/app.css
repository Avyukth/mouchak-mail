@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		/* === shadcn Base Tokens === */
		--background: 0 0% 100%;
		--foreground: 224 71.4% 4.1%;
		--card: 0 0% 100%;
		--card-foreground: 224 71.4% 4.1%;
		--popover: 0 0% 100%;
		--popover-foreground: 224 71.4% 4.1%;
		--primary: 14 100% 57%;
		--primary-foreground: 0 0% 100%;
		--secondary: 220 14.3% 95.9%;
		--secondary-foreground: 220.9 39.3% 11%;
		--muted: 220 14.3% 95.9%;
		--muted-foreground: 220 8.9% 46.1%;
		--accent: 220 14.3% 95.9%;
		--accent-foreground: 220.9 39.3% 11%;
		--destructive: 0 84.2% 60.2%;
		--destructive-foreground: 210 20% 98%;
		--border: 220 13% 91%;
		--input: 220 13% 91%;
		--ring: 14 100% 57%;
		--radius: 0.5rem;

		/* === Spacing Scale (8px grid) === */
		--space-1: 0.25rem;  /* 4px */
		--space-2: 0.5rem;   /* 8px */
		--space-3: 0.75rem;  /* 12px */
		--space-4: 1rem;     /* 16px */
		--space-6: 1.5rem;   /* 24px */
		--space-8: 2rem;     /* 32px */
		--space-12: 3rem;    /* 48px */

		/* === Animation Tokens === */
		--duration-instant: 50ms;
		--duration-fast: 150ms;
		--duration-normal: 200ms;
		--duration-slow: 300ms;
		--duration-slower: 500ms;
		--ease-out: cubic-bezier(0.16, 1, 0.3, 1);
		--ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
		--ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);

		/* === Status Colors (HSL) === */
		--status-online: 142 76% 36%;
		--status-offline: 0 84% 60%;
		--status-pending: 38 92% 50%;
		--status-idle: 220 9% 46%;

		/* === Shadow Tokens === */
		--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
		--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
		--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
		--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
		--shadow-focus: 0 0 0 3px hsl(var(--ring) / 0.3);

		/* === Touch Target === */
		--touch-target-min: 44px;
	}

	.dark {
		/* === Factory.ai Dark Theme === */
		--background: 0 0% 0%;
		--foreground: 0 0% 95%;
		--card: 0 0% 4%;
		--card-foreground: 0 0% 95%;
		--popover: 0 0% 4%;
		--popover-foreground: 0 0% 95%;
		--primary: 14 100% 57%;
		--primary-foreground: 0 0% 0%;
		--secondary: 0 0% 10%;
		--secondary-foreground: 0 0% 95%;
		--muted: 0 0% 10%;
		--muted-foreground: 0 0% 55%;
		--accent: 0 0% 12%;
		--accent-foreground: 0 0% 95%;
		--destructive: 0 62.8% 30.6%;
		--destructive-foreground: 0 0% 95%;
		--border: 0 0% 15%;
		--input: 0 0% 12%;
		--ring: 14 100% 57%;

		/* === Shadow Tokens (Dark) === */
		--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
		--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3);
		--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.3);
		--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.3);
	}
}

@layer base {
	* {
		@apply border-border;
	}
	body {
		@apply bg-background text-foreground;
		font-feature-settings:
			'rlig' 1,
			'calt' 1;
	}
}

/* === Entrance Animations (CSS Keyframes) === */
@keyframes fade-in {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes fade-in-up {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fade-in-down {
	from {
		opacity: 0;
		transform: translateY(-10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slide-in-right {
	from {
		opacity: 0;
		transform: translateX(20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes slide-in-left {
	from {
		opacity: 0;
		transform: translateX(-20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes scale-in {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

@keyframes blur-fade-in {
	from {
		opacity: 0;
		filter: blur(4px);
	}
	to {
		opacity: 1;
		filter: blur(0);
	}
}

/* Shimmer animation for skeleton loading */
@keyframes shimmer {
	0% {
		background-position: -200% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

/* === Pulse animation for status indicators === */
@keyframes pulse-status {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

/* === Utility Classes === */
.skeleton-shimmer {
	background: linear-gradient(
		90deg,
		hsl(var(--muted)) 0%,
		hsl(var(--muted-foreground) / 0.1) 50%,
		hsl(var(--muted)) 100%
	);
	background-size: 200% 100%;
	animation: shimmer 2s infinite ease-in-out;
}

/* Status indicator utilities */
.status-online {
	background-color: hsl(var(--status-online));
}
.status-offline {
	background-color: hsl(var(--status-offline));
}
.status-pending {
	background-color: hsl(var(--status-pending));
	animation: pulse-status 2s infinite;
}
.status-idle {
	background-color: hsl(var(--status-idle));
}

/* Touch target enforcement */
.touch-target {
	min-height: var(--touch-target-min);
	min-width: var(--touch-target-min);
}

/* Focus visible ring */
.focus-ring {
	@apply outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
}

/* === Reduced Motion Preference === */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	.skeleton-shimmer {
		animation: none;
		background: hsl(var(--muted));
	}

	.status-pending {
		animation: none;
	}
}

/* === Scrollbar Styling === */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: hsl(var(--border));
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: hsl(var(--muted-foreground) / 0.5);
}

/* Firefox scrollbar */
* {
	scrollbar-width: thin;
	scrollbar-color: hsl(var(--border)) transparent;
}

/* ========================================
   Factory.ai Design System - Spotlight & Toggle
   ======================================== */

/* Icon stroke refinement for minimal outlined aesthetic */
:root {
	--icon-stroke-width: 1.5;
}

/* Apply 1.5px stroke to all Lucide icons */
svg[class*="lucide"] {
	stroke-width: 1.5;
}

/* Travelling Spotlight for Navigation */
.nav-spotlight {
	position: absolute;
	left: 0;
	background: hsl(var(--primary) / 0.1);
	border-radius: 8px;
	opacity: 0;
	transition:
		transform var(--duration-normal) var(--ease-in-out),
		width var(--duration-normal) var(--ease-in-out),
		height var(--duration-normal) var(--ease-in-out),
		opacity var(--duration-fast) ease;
	pointer-events: none;
	z-index: 0;
}

.nav-container:hover .nav-spotlight {
	opacity: 1;
}

.dark .nav-spotlight {
	background: hsl(var(--primary) / 0.15);
}

/* Theme Toggle Segmented Control */
.theme-toggle {
	position: relative;
	display: inline-flex;
	align-items: center;
	background: hsl(var(--muted));
	border: 1px solid hsl(var(--border));
	border-radius: 8px;
	padding: 3px;
	gap: 2px;
}

.theme-indicator {
	position: absolute;
	top: 3px;
	height: calc(100% - 6px);
	background: hsl(var(--background));
	border-radius: 6px;
	transition:
		left var(--duration-slow) var(--ease-out),
		width var(--duration-slow) var(--ease-out);
	box-shadow: var(--shadow-sm);
	z-index: 0;
}

.theme-option {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 6px;
	padding: 6px 10px;
	min-width: 36px;
	min-height: 32px;
	background: transparent;
	border: none;
	border-radius: 5px;
	color: hsl(var(--muted-foreground));
	cursor: pointer;
	z-index: 1;
	transition: color var(--duration-fast) ease;
}

.theme-option[data-active="true"] {
	color: hsl(var(--foreground));
}

.theme-option:hover:not([data-active="true"]) {
	color: hsl(var(--foreground) / 0.7);
}

.theme-option:focus-visible {
	outline: 2px solid hsl(var(--ring));
	outline-offset: 2px;
}

.theme-label {
	font-size: 11px;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	font-family: ui-monospace, SFMono-Regular, monospace;
}

/* Reduced motion override for Factory.ai components */
@media (prefers-reduced-motion: reduce) {
	.nav-spotlight,
	.theme-indicator {
		transition: opacity var(--duration-instant) ease;
	}
}
